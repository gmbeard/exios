Fixes a potential deadlock when cancelling I/O in completion handlers
